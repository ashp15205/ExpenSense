{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ashish Patil\\\\OneDrive\\\\Desktop\\\\Expense Manager\\\\src\\\\components\\\\Expense\\\\AddExpenseSheet.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport AddExpenseEntry from \"./AddExpenseEntry\";\nimport { Card, Button, Badge, Dropdown, Row, Col } from \"react-bootstrap\";\nimport { useState } from \"react\";\nimport { Redirect } from \"react-router\";\nimport { Navbar, Modal } from \"react-bootstrap\";\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\nimport \"./Expense.css\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider, { Search } from \"react-bootstrap-table2-toolkit\";\nimport { useSelector } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { useEffect } from \"react\";\nimport { deleteEntry } from \"../../actions/expense.actions\";\nimport { getExpenseSheets } from \"../../actions/expense.actions\";\nimport attachmentsService from \"../../services/attachments.service\"; // import { getProjects } from \"../../actions/project\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst AddExpenseSheet = () => {\n  _s();\n\n  const [show, setShow] = useState(false);\n  const [del, setDel] = useState(false);\n  const [delId, setDelId] = useState(-1);\n  const [method, setMethod] = useState(\"Add\");\n\n  const showModal = () => {\n    // console.log(\"working\");\n    setShow(true);\n  };\n\n  const hideModal = () => {\n    // console.log(\"working\");\n    setShow(false);\n    setEntry(initialEntry);\n    setMethod(\"Add\");\n  };\n\n  const showDel = () => {\n    setDel(true);\n  };\n\n  const closeDel = () => {\n    setDel(false);\n  };\n\n  const todayDate = () => {\n    const date = new Date();\n    var d = new Date(date),\n        month = \"\" + (d.getMonth() + 1),\n        day = \"\" + d.getDate(),\n        year = d.getFullYear();\n    if (month.length < 2) month = \"0\" + month;\n    if (day.length < 2) day = \"0\" + day;\n    return [year, month, day].join(\"-\");\n  };\n\n  const initialEntry = {\n    projectName: \"\",\n    name: \"\",\n    paymentMethod: \"CARD\",\n    currency: \"INR\",\n    date: todayDate(),\n    billable: \"\",\n    reimburseable: \"\",\n    netAmount: 0,\n    taxZone: \"IND\",\n    tax: 0,\n    amount: 0,\n    description: \"\",\n    attachments: \"\",\n    file: null\n  };\n  const [entry, setEntry] = useState(initialEntry);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getExpenseSheets()).then(() => {\n      // console.log(\"Expenses fetched successfully\");\n      return;\n    }).catch(() => {\n      alert(\"Unable to fetch Expenses\");\n    });\n  }, [dispatch, entry]);\n  const {\n    entries: content\n  } = useSelector(state => state.expenseSheets);\n\n  const transformDate = date => {\n    const splitDate = date.split(\"-\");\n    const newDateList = splitDate.reverse();\n    const newDate = newDateList.join(\"-\");\n    return newDate;\n  };\n\n  const handleSelect = e => {\n    showModal();\n    const index = content.findIndex(o => o.expenseId.toString() === e.target.id.toString());\n    let dataGot = content[index];\n    let toPass = {\n      expenseId: \"\",\n      projectName: \"\",\n      name: \"\",\n      paymentMethod: \"CARD\",\n      currency: \"INR\",\n      date: \"\",\n      billable: \"\",\n      reimburseable: \"\",\n      netAmount: 0,\n      taxZone: \"IND\",\n      tax: 0,\n      amount: 0,\n      description: \"\",\n      attachments: []\n    };\n    toPass.expenseId = dataGot.expenseId;\n    toPass.projectName = dataGot.project.id;\n    toPass.name = dataGot.name;\n    toPass.paymentMethod = dataGot.paymentMethod;\n    toPass.currency = dataGot.currency;\n    toPass.date = transformDate(dataGot.date);\n    toPass.billable = dataGot.billable;\n    toPass.reimburseable = dataGot.reimburseable;\n    toPass.netAmount = dataGot.netAmount;\n    toPass.taxZone = dataGot.taxZone;\n    toPass.tax = dataGot.tax;\n    toPass.amount = dataGot.amount;\n    toPass.description = dataGot.description;\n    toPass.attachments = dataGot.attachments;\n    setEntry(toPass); // console.log(entry);\n\n    setMethod(\"Edit\");\n  };\n\n  const handleDelete = e => {\n    // const payload = [Number(e.target.id)]\n    closeDel();\n    dispatch(deleteEntry(e.target.id)).then(() => {\n      dispatch(getExpenseSheets()).then(() => {\n        // console.log(\"Entries fetched successfully\");\n        return;\n      }).catch(() => {\n        alert(\"Unable to fetch entries\");\n      });\n    }).catch(() => {\n      alert(\"Could not delete entry!!\");\n    });\n  };\n\n  const confirmDelete = e => {\n    showDel();\n    setDelId(e.target.id);\n  };\n\n  const handleDownload = e => {\n    attachmentsService.downloadDoc(e.target.id).then(response => {\n      // console.log(\"Downloaded! \", response);\n      //Create a Blob from the PDF Stream\n      const file = new Blob([response], {\n        type: \"application/pdf\"\n      }); //Build a URL from the file\n\n      const fileURL = URL.createObjectURL(file); //Open the URL on new Window\n\n      window.open(fileURL);\n    }).catch(() => {\n      alert(\"Could Not Download!\");\n    });\n  };\n\n  const dropDown = (id, attachmentId, status) => {\n    return /*#__PURE__*/_jsxDEV(Dropdown, {\n      children: [/*#__PURE__*/_jsxDEV(Dropdown.Toggle, {\n        id: \"options-menu\",\n        variant: \"secondary\",\n        size: \"sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-gear-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), \" Options\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dropdown.Menu, {\n        variant: \"dark\",\n        children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n          onClick: handleSelect,\n          id: id,\n          disabled: status !== \"SUBMITTED\",\n          children: \"Edit Expense\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n          onClick: handleDownload,\n          id: attachmentId,\n          children: \"View Attachment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n          onClick: confirmDelete,\n          id: id,\n          disabled: status !== \"SUBMITTED\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this);\n  };\n\n  const {\n    SearchBar\n  } = Search;\n\n  const afterSearch = newResult => {\n    // console.log(newResult);\n    return;\n  };\n\n  const SortCaret = (order, column) => {\n    if (!order) return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"float-end\",\n      children: /*#__PURE__*/_jsxDEV(\"font\", {\n        color: \"grey\",\n        children: [\"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-up-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-down-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }, this);else if (order === \"asc\") return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"float-end\",\n      children: [\"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-caret-up-fill\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"font\", {\n        color: \"grey\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-down-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }, this);else if (order === \"desc\") return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"float-end\",\n      children: [\"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"font\", {\n        color: \"grey\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-caret-up-fill\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-caret-down-fill\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 9\n    }, this);\n    return null;\n  };\n\n  const columns = [{\n    dataField: \"date\",\n    text: \"Date\",\n    sort: true,\n    // headerSortingStyle,\n    sortCaret: SortCaret,\n    headerStyle: (column, colIndex) => {\n      return {\n        width: \"150px\"\n      };\n    }\n  }, {\n    dataField: \"projectName\",\n    text: \"Project Name\",\n    sort: true,\n    headerStyle: (column, colIndex) => {\n      return {\n        width: \"250px\"\n      };\n    },\n    // headerSortingStyle,\n    sortCaret: SortCaret\n  }, {\n    dataField: \"name\",\n    text: \"Expense Name\",\n    sort: true,\n    headerStyle: (column, colIndex) => {\n      return {\n        width: \"250px\"\n      };\n    },\n    // headerSortingStyle,\n    sortCaret: SortCaret\n  }, {\n    dataField: \"description\",\n    text: \"Description\",\n    sort: true // headerSortingStyle,\n\n  }, {\n    dataField: \"amount\",\n    text: \"Amount\",\n    sort: true,\n    sortCaret: SortCaret,\n    // headerSortingStyle,\n    headerStyle: (column, colIndex) => {\n      return {\n        width: \"150px\"\n      };\n    }\n  }, {\n    dataField: \"status\",\n    text: \"Status\",\n    sort: true,\n    headerStyle: (column, colIndex) => {\n      return {\n        width: \"150px\"\n      };\n    },\n    // headerSortingStyle,\n    sortCaret: SortCaret\n  }, {\n    dataField: \"options\",\n    text: \"Options\",\n    headerStyle: (column, colIndex) => {\n      return {\n        width: \"150px\"\n      };\n    } // sort: true\n\n  }];\n  const entryData = content.map(expense => {\n    var BadgeType = \"secondary\";\n\n    if (expense.status === \"SUBMITTED\") {\n      BadgeType = \"info\";\n    } else if (expense.status === \"APPROVED\") {\n      BadgeType = \"success\";\n    } else if (expense.status === \"REJECTED\") {\n      BadgeType = \"danger\";\n    }\n\n    const attachmentId = expense.attachments.length > 0 ? expense.attachments[0].id : -1;\n    const expenseData = {\n      date: expense.date,\n      projectName: expense.project.projectName,\n      name: expense.name,\n      description: expense.description,\n      amount: Number(Number(expense.amount) + Number(expense.tax)).toFixed(2),\n      status: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: /*#__PURE__*/_jsxDEV(Badge, {\n          bg: BadgeType,\n          children: expense.status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this),\n      options: /*#__PURE__*/_jsxDEV(\"center\", {\n        children: dropDown(expense.expenseId, attachmentId, expense.status)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this)\n    };\n    return expenseData;\n  });\n\n  function getSum(total, num) {\n    return total + num;\n  }\n\n  const totalAmount = content.map(entry => entry.amount + entry.tax).reduce(getSum, 0);\n  const totalReimbursed = content.filter(e => e.status === \"APPROVED\").map(entry => entry.amount + entry.tax).reduce(getSum, 0);\n  const defaultSorted = [{\n    dataField: \"date\",\n    order: \"desc\" //desc and asc\n\n  }];\n  const {\n    user: currentUser\n  } = useSelector(state => state.auth);\n  const employeeName = currentUser.firstName + \" \" + currentUser.lastName;\n\n  if (!currentUser) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      expand: \"lg\",\n      bg: \"light\",\n      children: /*#__PURE__*/_jsxDEV(Navbar.Text, {\n        children: [\"\\xA0 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Dashboard : Expenses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 18\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: \"95%\"\n      },\n      className: \"ms-5\",\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        as: \"h4\",\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dark\",\n            children: [\"EXPENSES\", /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"success\" // style={{ marginRight: 5 }}\n              ,\n              id: \"addExpenseEntry\",\n              onClick: showModal,\n              className: \"float-end\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-plus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 17\n              }, this), \" Add Expense Entry\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              xs: 4,\n              type: \"wide-col\",\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"bi bi-person\",\n                      type: \"employee-icon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 413,\n                      columnNumber: 23\n                    }, this), \" \", \"Employee\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 411,\n                    columnNumber: 21\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 409,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"display-6\",\n                  children: employeeName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              xs: 4,\n              type: \"amount-col\",\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"bi bi-cash\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 427,\n                      columnNumber: 23\n                    }, this), \" Total Expenses Amount\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 21\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"display-6\",\n                  children: [\"INR \", Number(totalAmount).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              xs: 4,\n              type: \"amount-col\",\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"bi bi-wallet\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 443,\n                      columnNumber: 23\n                    }, this), \" Total Reimbursed Amount\", \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 442,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: \"display-6\",\n                  children: [\"INR \", Number(totalReimbursed).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: \"95%\"\n      },\n      className: \"ms-5\",\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        as: \"h5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-primary\",\n          children: \"EXPENSE ENTRY LIST\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: /*#__PURE__*/_jsxDEV(ToolkitProvider, {\n          keyField: \"description\",\n          data: entryData,\n          columns: columns,\n          search: {\n            afterSearch\n          },\n          children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(SearchBar, {\n              id: \"searchbar\",\n              ...props.searchProps\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(BootstrapTable, {\n              keyField: \"id\",\n              data: entryData,\n              columns: columns,\n              defaultSorted: defaultSorted,\n              headerClasses: \"header-class\",\n              pagination: paginationFactory(),\n              ...props.baseProps\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: \"95%\"\n      },\n      className: \"ms-5\",\n      children: [/*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            size: \"sm\",\n            children: \"Status Legend\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"info\",\n            size: \"sm\",\n            children: \"Submitted\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"success\",\n            size: \"sm\",\n            children: \"Approved\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"danger\",\n            size: \"sm\",\n            children: [\"Rejected\", \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 13\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AddExpenseEntry, {\n        show: show,\n        onHide: hideModal,\n        data: entry,\n        method: method\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: del,\n      onHide: closeDel,\n      backdrop: \"static\",\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Confirm Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: \"Are you sure you want to delete this expense?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleDelete,\n          id: delId,\n          children: \"Confirm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: closeDel,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(AddExpenseSheet, \"dYl8yUWQxiq+PF8QabGc42wB4rA=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = AddExpenseSheet;\nexport default AddExpenseSheet;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddExpenseSheet\");","map":{"version":3,"sources":["C:/Users/Ashish Patil/OneDrive/Desktop/Expense Manager/src/components/Expense/AddExpenseSheet.js"],"names":["React","AddExpenseEntry","Card","Button","Badge","Dropdown","Row","Col","useState","Redirect","Navbar","Modal","BootstrapTable","paginationFactory","ToolkitProvider","Search","useSelector","useDispatch","useEffect","deleteEntry","getExpenseSheets","attachmentsService","AddExpenseSheet","show","setShow","del","setDel","delId","setDelId","method","setMethod","showModal","hideModal","setEntry","initialEntry","showDel","closeDel","todayDate","date","Date","d","month","getMonth","day","getDate","year","getFullYear","length","join","projectName","name","paymentMethod","currency","billable","reimburseable","netAmount","taxZone","tax","amount","description","attachments","file","entry","dispatch","then","catch","alert","entries","content","state","expenseSheets","transformDate","splitDate","split","newDateList","reverse","newDate","handleSelect","e","index","findIndex","o","expenseId","toString","target","id","dataGot","toPass","project","handleDelete","confirmDelete","handleDownload","downloadDoc","response","Blob","type","fileURL","URL","createObjectURL","window","open","dropDown","attachmentId","status","SearchBar","afterSearch","newResult","SortCaret","order","column","columns","dataField","text","sort","sortCaret","headerStyle","colIndex","width","entryData","map","expense","BadgeType","expenseData","Number","toFixed","options","getSum","total","num","totalAmount","reduce","totalReimbursed","filter","defaultSorted","user","currentUser","auth","employeeName","firstName","lastName","props","searchProps","baseProps"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport AddExpenseEntry from \"./AddExpenseEntry\";\r\nimport { Card, Button, Badge, Dropdown, Row, Col } from \"react-bootstrap\";\r\nimport { useState } from \"react\";\r\nimport { Redirect } from \"react-router\";\r\nimport { Navbar, Modal } from \"react-bootstrap\";\r\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\r\nimport \"./Expense.css\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\nimport ToolkitProvider, { Search } from \"react-bootstrap-table2-toolkit\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\n\r\nimport { deleteEntry } from \"../../actions/expense.actions\";\r\nimport { getExpenseSheets } from \"../../actions/expense.actions\";\r\nimport attachmentsService from \"../../services/attachments.service\";\r\n// import { getProjects } from \"../../actions/project\";\r\n\r\nconst AddExpenseSheet = () => {\r\n  const [show, setShow] = useState(false);\r\n  const [del, setDel] = useState(false);\r\n  const [delId, setDelId] = useState(-1);\r\n  const [method, setMethod] = useState(\"Add\");\r\n  const showModal = () => {\r\n    // console.log(\"working\");\r\n    setShow(true);\r\n  };\r\n  const hideModal = () => {\r\n    // console.log(\"working\");\r\n    setShow(false);\r\n    setEntry(initialEntry);\r\n    setMethod(\"Add\");\r\n  };\r\n\r\n  const showDel = () => {\r\n    setDel(true);\r\n  };\r\n  const closeDel = () => {\r\n    setDel(false);\r\n  };\r\n\r\n  const todayDate = () => {\r\n    const date = new Date();\r\n    var d = new Date(date),\r\n      month = \"\" + (d.getMonth() + 1),\r\n      day = \"\" + d.getDate(),\r\n      year = d.getFullYear();\r\n    if (month.length < 2) month = \"0\" + month;\r\n    if (day.length < 2) day = \"0\" + day;\r\n    return [year, month, day].join(\"-\");\r\n  };\r\n\r\n  const initialEntry = {\r\n    projectName: \"\",\r\n    name: \"\",\r\n    paymentMethod: \"CARD\",\r\n    currency: \"INR\",\r\n    date: todayDate(),\r\n    billable: \"\",\r\n    reimburseable: \"\",\r\n    netAmount: 0,\r\n    taxZone: \"IND\",\r\n    tax: 0,\r\n    amount: 0,\r\n    description: \"\",\r\n    attachments: \"\",\r\n    file: null,\r\n  };\r\n\r\n  const [entry, setEntry] = useState(initialEntry);\r\n\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(getExpenseSheets())\r\n      .then(() => {\r\n        // console.log(\"Expenses fetched successfully\");\r\n        return;\r\n      })\r\n      .catch(() => {\r\n        alert(\"Unable to fetch Expenses\");\r\n      });\r\n  }, [dispatch, entry]);\r\n\r\n  const { entries: content } = useSelector((state) => state.expenseSheets);\r\n\r\n  const transformDate = (date) => {\r\n    const splitDate = date.split(\"-\");\r\n    const newDateList = splitDate.reverse();\r\n    const newDate = newDateList.join(\"-\");\r\n\r\n    return newDate;\r\n  };\r\n\r\n  const handleSelect = (e) => {\r\n    showModal();\r\n    const index = content.findIndex(\r\n      (o) => o.expenseId.toString() === e.target.id.toString()\r\n    );\r\n\r\n    let dataGot = content[index];\r\n    let toPass = {\r\n      expenseId: \"\",\r\n      projectName: \"\",\r\n      name: \"\",\r\n      paymentMethod: \"CARD\",\r\n      currency: \"INR\",\r\n      date: \"\",\r\n      billable: \"\",\r\n      reimburseable: \"\",\r\n      netAmount: 0,\r\n      taxZone: \"IND\",\r\n      tax: 0,\r\n      amount: 0,\r\n      description: \"\",\r\n      attachments: [],\r\n    };\r\n    toPass.expenseId = dataGot.expenseId;\r\n    toPass.projectName = dataGot.project.id;\r\n    toPass.name = dataGot.name;\r\n    toPass.paymentMethod = dataGot.paymentMethod;\r\n    toPass.currency = dataGot.currency;\r\n    toPass.date = transformDate(dataGot.date);\r\n    toPass.billable = dataGot.billable;\r\n    toPass.reimburseable = dataGot.reimburseable;\r\n    toPass.netAmount = dataGot.netAmount;\r\n    toPass.taxZone = dataGot.taxZone;\r\n    toPass.tax = dataGot.tax;\r\n    toPass.amount = dataGot.amount;\r\n    toPass.description = dataGot.description;\r\n    toPass.attachments = dataGot.attachments;\r\n\r\n    setEntry(toPass);\r\n    // console.log(entry);\r\n    setMethod(\"Edit\");\r\n  };\r\n\r\n  const handleDelete = (e) => {\r\n    // const payload = [Number(e.target.id)]\r\n    closeDel();\r\n    dispatch(deleteEntry(e.target.id))\r\n      .then(() => {\r\n        dispatch(getExpenseSheets())\r\n          .then(() => {\r\n            // console.log(\"Entries fetched successfully\");\r\n            return;\r\n          })\r\n          .catch(() => {\r\n            alert(\"Unable to fetch entries\");\r\n          });\r\n      })\r\n      .catch(() => {\r\n        alert(\"Could not delete entry!!\");\r\n      });\r\n  };\r\n\r\n  const confirmDelete = (e) => {\r\n    showDel();\r\n    setDelId(e.target.id);\r\n  };\r\n\r\n  const handleDownload = (e) => {\r\n    attachmentsService\r\n      .downloadDoc(e.target.id)\r\n      .then((response) => {\r\n        // console.log(\"Downloaded! \", response);\r\n        //Create a Blob from the PDF Stream\r\n        const file = new Blob([response], { type: \"application/pdf\" });\r\n        //Build a URL from the file\r\n        const fileURL = URL.createObjectURL(file);\r\n        //Open the URL on new Window\r\n        window.open(fileURL);\r\n      })\r\n      .catch(() => {\r\n        alert(\"Could Not Download!\");\r\n      });\r\n  };\r\n\r\n  const dropDown = (id, attachmentId, status) => {\r\n    return (\r\n      <Dropdown>\r\n        <Dropdown.Toggle id=\"options-menu\" variant=\"secondary\" size=\"sm\">\r\n          <i className=\"bi bi-gear-fill\"></i> Options\r\n        </Dropdown.Toggle>\r\n\r\n        <Dropdown.Menu variant=\"dark\">\r\n          <Dropdown.Item\r\n            onClick={handleSelect}\r\n            id={id}\r\n            disabled={status !== \"SUBMITTED\"}\r\n          >\r\n            Edit Expense\r\n          </Dropdown.Item>\r\n          <Dropdown.Item\r\n            onClick={handleDownload}\r\n            id={attachmentId}\r\n          >\r\n            View Attachment\r\n          </Dropdown.Item>\r\n          <Dropdown.Item\r\n            onClick={confirmDelete}\r\n            id={id}\r\n            disabled={status !== \"SUBMITTED\"}\r\n          >\r\n            Delete\r\n          </Dropdown.Item>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    );\r\n  };\r\n\r\n  const { SearchBar } = Search;\r\n  const afterSearch = (newResult) => {\r\n    // console.log(newResult);\r\n    return;\r\n  };\r\n  const SortCaret = (order, column) => {\r\n    if (!order)\r\n      return (\r\n        <span className=\"float-end\">\r\n          <font color=\"grey\">\r\n            &nbsp;&nbsp;<i className=\"bi bi-caret-up-fill\"></i>\r\n            <i className=\"bi bi-caret-down-fill\"></i>\r\n          </font>\r\n        </span>\r\n      );\r\n    else if (order === \"asc\")\r\n      return (\r\n        <span className=\"float-end\">\r\n          &nbsp;&nbsp;<i className=\"bi bi-caret-up-fill\"></i>\r\n          <font color=\"grey\">\r\n            <i className=\"bi bi-caret-down-fill\"></i>\r\n          </font>\r\n        </span>\r\n      );\r\n    else if (order === \"desc\")\r\n      return (\r\n        <span className=\"float-end\">\r\n          &nbsp;&nbsp;\r\n          <font color=\"grey\">\r\n            <i className=\"bi bi-caret-up-fill\"></i>\r\n          </font>\r\n          <i className=\"bi bi-caret-down-fill\"></i>\r\n        </span>\r\n      );\r\n    return null;\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      dataField: \"date\",\r\n      text: \"Date\",\r\n      sort: true,\r\n      // headerSortingStyle,\r\n      sortCaret: SortCaret,\r\n      headerStyle: (column, colIndex) => {\r\n        return { width: \"150px\" };\r\n      },\r\n    },\r\n    {\r\n      dataField: \"projectName\",\r\n      text: \"Project Name\",\r\n      sort: true,\r\n      headerStyle: (column, colIndex) => {\r\n        return { width: \"250px\" };\r\n      },\r\n      // headerSortingStyle,\r\n      sortCaret: SortCaret,\r\n    },\r\n    {\r\n      dataField: \"name\",\r\n      text: \"Expense Name\",\r\n      sort: true,\r\n      headerStyle: (column, colIndex) => {\r\n        return { width: \"250px\" };\r\n      },\r\n      // headerSortingStyle,\r\n      sortCaret: SortCaret,\r\n    },\r\n    {\r\n      dataField: \"description\",\r\n      text: \"Description\",\r\n      sort: true,\r\n      // headerSortingStyle,\r\n    },\r\n    {\r\n      dataField: \"amount\",\r\n      text: \"Amount\",\r\n      sort: true,\r\n\r\n      sortCaret: SortCaret,\r\n      // headerSortingStyle,\r\n      headerStyle: (column, colIndex) => {\r\n        return { width: \"150px\" };\r\n      },\r\n    },\r\n    {\r\n      dataField: \"status\",\r\n      text: \"Status\",\r\n      sort: true,\r\n      headerStyle: (column, colIndex) => {\r\n        return { width: \"150px\" };\r\n      },\r\n      // headerSortingStyle,\r\n      sortCaret: SortCaret,\r\n    },\r\n    {\r\n      dataField: \"options\",\r\n      text: \"Options\",\r\n      headerStyle: (column, colIndex) => {\r\n        return { width: \"150px\" };\r\n      },\r\n      // sort: true\r\n    },\r\n  ];\r\n\r\n  const entryData = content.map((expense) => {\r\n    var BadgeType = \"secondary\";\r\n    if (expense.status === \"SUBMITTED\") {\r\n      BadgeType = \"info\";\r\n    } else if (expense.status === \"APPROVED\") {\r\n      BadgeType = \"success\";\r\n    } else if (expense.status === \"REJECTED\") {\r\n      BadgeType = \"danger\";\r\n    }\r\n    const attachmentId =\r\n      expense.attachments.length > 0 ? expense.attachments[0].id : -1;\r\n\r\n    const expenseData = {\r\n      date: expense.date,\r\n      projectName: expense.project.projectName,\r\n      name: expense.name,\r\n      description: expense.description,\r\n      amount: Number(Number(expense.amount) + Number(expense.tax)).toFixed(2),\r\n      status: (\r\n        <center>\r\n          <Badge bg={BadgeType}>{expense.status}</Badge>\r\n        </center>\r\n      ),\r\n      options: (\r\n        <center>\r\n          {dropDown(expense.expenseId, attachmentId, expense.status)}\r\n        </center>\r\n      ),\r\n    };\r\n    return expenseData;\r\n  });\r\n\r\n  function getSum(total, num) {\r\n    return total + num;\r\n  }\r\n\r\n  const totalAmount = content\r\n    .map((entry) => entry.amount + entry.tax)\r\n    .reduce(getSum, 0);\r\n\r\n  const totalReimbursed = content\r\n    .filter((e) => e.status === \"APPROVED\")\r\n    .map((entry) => entry.amount + entry.tax)\r\n    .reduce(getSum, 0);\r\n\r\n  const defaultSorted = [\r\n    {\r\n      dataField: \"date\",\r\n      order: \"desc\", //desc and asc\r\n    },\r\n  ];\r\n\r\n  const { user: currentUser } = useSelector((state) => state.auth);\r\n\r\n  const employeeName = currentUser.firstName + \" \" + currentUser.lastName;\r\n\r\n  if (!currentUser) {\r\n    return <Redirect to=\"/login\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Navbar expand=\"lg\" bg=\"light\">\r\n        <Navbar.Text>\r\n          &nbsp; <strong>Dashboard : Expenses</strong>\r\n        </Navbar.Text>\r\n      </Navbar>\r\n      <br />\r\n      <Card style={{ width: \"95%\" }} className=\"ms-5\">\r\n        <Card.Header as=\"h4\">\r\n          <Col>\r\n            <div className=\"dark\">\r\n              EXPENSES\r\n              <Button\r\n                variant=\"success\"\r\n                // style={{ marginRight: 5 }}\r\n                id=\"addExpenseEntry\"\r\n                onClick={showModal}\r\n                className=\"float-end\"\r\n              >\r\n                <i className=\"bi bi-plus\"></i> Add Expense Entry\r\n              </Button>\r\n            </div>\r\n          </Col>\r\n        </Card.Header>\r\n        <Card.Body>\r\n          <div>\r\n            <Row>\r\n              <Col xs={4} type=\"wide-col\">\r\n                <Row>\r\n                  {\" \"}\r\n                  <div>\r\n                    {\" \"}\r\n                    <small>\r\n                      {\" \"}\r\n                      <i className=\"bi bi-person\" type=\"employee-icon\"></i>{\" \"}\r\n                      Employee\r\n                    </small>{\" \"}\r\n                  </div>\r\n                </Row>\r\n                <Row>\r\n                  <p className=\"display-6\">{employeeName}</p>\r\n                </Row>\r\n              </Col>\r\n              <Col xs={4} type=\"amount-col\">\r\n                <Row>\r\n                  <div>\r\n                    {\" \"}\r\n                    <small>\r\n                      <i className=\"bi bi-cash\"></i> Total Expenses Amount\r\n                    </small>{\" \"}\r\n                  </div>\r\n                </Row>\r\n                <Row>\r\n                  <h1 className=\"display-6\">\r\n                    INR {Number(totalAmount).toFixed(2)}\r\n                  </h1>\r\n                </Row>\r\n              </Col>\r\n\r\n              <Col xs={4} type=\"amount-col\">\r\n                <Row>\r\n                  <div>\r\n                    {\" \"}\r\n                    <small>\r\n                      <i className=\"bi bi-wallet\"></i> Total Reimbursed Amount{\" \"}\r\n                    </small>\r\n                  </div>\r\n                </Row>\r\n                <Row>\r\n                  <h1 className=\"display-6\">\r\n                    INR {Number(totalReimbursed).toFixed(2)}\r\n                  </h1>\r\n                </Row>\r\n              </Col>\r\n            </Row>\r\n          </div>\r\n        </Card.Body>\r\n      </Card>\r\n      <br />\r\n      <Card style={{ width: \"95%\" }} className=\"ms-5\">\r\n        <Card.Header as=\"h5\">\r\n          <div className=\"text-primary\">EXPENSE ENTRY LIST</div>\r\n        </Card.Header>\r\n        <Card.Body>\r\n          <ToolkitProvider\r\n            keyField=\"description\"\r\n            data={entryData}\r\n            columns={columns}\r\n            search={{ afterSearch }}\r\n          >\r\n            {(props) => (\r\n              <div>\r\n                <SearchBar id=\"searchbar\" {...props.searchProps} />\r\n                <br />\r\n                <BootstrapTable\r\n                  keyField=\"id\"\r\n                  data={entryData}\r\n                  columns={columns}\r\n                  defaultSorted={defaultSorted}\r\n                  headerClasses=\"header-class\"\r\n                  pagination={paginationFactory()}\r\n                  {...props.baseProps}\r\n                />\r\n              </div>\r\n            )}\r\n          </ToolkitProvider>\r\n        </Card.Body>\r\n      </Card>\r\n      <br />\r\n      <Card style={{ width: \"95%\" }} className=\"ms-5\">\r\n        <Card.Body>\r\n          {\" \"}\r\n          <div>\r\n            <Button variant=\"secondary\" size=\"sm\">\r\n              Status Legend\r\n            </Button>{\" \"}\r\n            {/* <Button variant=\"warning\" size=\"sm\">Not Submitted</Button>{' '} */}\r\n            <Button variant=\"info\" size=\"sm\">\r\n              Submitted\r\n            </Button>{\" \"}\r\n            <Button variant=\"success\" size=\"sm\">\r\n              Approved\r\n            </Button>{\" \"}\r\n            <Button variant=\"danger\" size=\"sm\">\r\n              Rejected{\" \"}\r\n            </Button>{\" \"}\r\n          </div>\r\n        </Card.Body>\r\n        <AddExpenseEntry\r\n          show={show}\r\n          onHide={hideModal}\r\n          data={entry}\r\n          method={method}\r\n        />\r\n      </Card>\r\n      <Modal show={del} onHide={closeDel} backdrop=\"static\">\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Confirm Delete</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>Are you sure you want to delete this expense?</Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={handleDelete} id={delId}>\r\n            Confirm\r\n          </Button>\r\n          <Button variant=\"secondary\" onClick={closeDel}>\r\n            Cancel\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AddExpenseSheet;\r\n"]},"metadata":{},"sourceType":"module"}